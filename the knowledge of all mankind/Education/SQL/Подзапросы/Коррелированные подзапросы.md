---
title: Коррелированные подзапросы
date: 2024-07-18
tags:
  - программирование
  - обучение
  - SQL
---

## Описание
Независимые (некоррелированные) могут выполняться автономно от основного запроса и мы можем посмотреть, что они возвращают перед тем, как их результат будет использоваться в основном запросе. Коррелированные же подзапросы ссылаются на один или несколько столбцов основного запроса.

Например, следующий коррелируемый подзапрос находит кто и сколько потратил:
```sql
SELECT FamilyMembers.member_name, (
    SELECT SUM(Payments.unit_price * Payments.amount)
    FROM Payments
    WHERE Payments.family_member = FamilyMembers.member_id
) AS total_spent
FROM FamilyMembers;
```

Коррелированный подзапрос отличается от некоррелированного подзапроса тем, что **он выполняется не один раз** перед выполнением запроса, в который он вложен, **а для каждой строки**, которая может быть включена в окончательный результат.

## Влияние на производительность
Следует обратить внимание на то, что использование коррелированных подзапросов может вызвать проблемы с производительностью, особенно если содержащий запрос возвращает много строк, так как коррелированный подзапрос будет выполняться для каждой строки содержащего запроса отдельно.

## Ссылки
- [[Подзапросы]]
- [[SELECT]]
