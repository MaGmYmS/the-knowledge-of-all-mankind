---
title: Подзапросы с несколькими строками и одним столбцом
date: 2024-07-18
tags:
  - программирование
  - обучение
  - SQL
---

## Описание
Если подзапрос возвращает более одной строки, его нельзя просто использовать с операторами сравнения, как это можно было делать с [[Подзапрос с одной строкой и с одним столбцом]].

Однако с подзапросами, возвращающими несколько строк и один столбец, можно использовать 3 оператора: `ALL`, `IN` и `ANY`. Каждый из них выполняет сравнение и возвращает `TRUE` или `FALSE`:

- `ALL` сравнивает все значения.
- `IN` проверяет наличие значения.
- `ANY` ищет хотя бы одно подходящее значение.

Примеры:
```sql
SELECT 200 > ALL(SELECT price FROM Rooms)
```

```sql
SELECT * FROM Users WHERE id IN (
    SELECT DISTINCT owner_id FROM Rooms WHERE price >= 150
)
```

```sql
SELECT * FROM Users WHERE id = ANY (
    SELECT DISTINCT owner_id FROM Rooms WHERE price >= 150
)
```

## Ссылки
- [[Подзапросы]]
- [[Подзапрос с одной строкой и с одним столбцом]]
- [[Операторы сравнения]]
- [[ALL]]
- [[IN]]
- [[ANY]]
